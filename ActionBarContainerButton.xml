<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\FrameXML\UI.xsd">

	<Button name="CollectionsContainerSlotButtonTemplate" inherits="ItemButtonTemplate, SecureHandlerClickTemplate" virtual="true">
		<Size x="30" y="30"/>
		<Anchors>
			<Anchor point="CENTER" relativeTo="$parent" relativePoint="CENTER">
				<Offset>
					<AbsDimension x="0" y="0"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Frames>
			<Frame name="$parentQuickAction" parentKey="QuickAction" framestrata="HIGH" hidden="true">
				<Size>
					<AbsDimension x="29" y="29"/>
				</Size>
				<Frames>
					<Cooldown parentKey="Cooldown" drawBling="false" inherits="CooldownFrameTemplate"/>
				</Frames>
				<Layers>
					<Layer level="OVERLAY">
						<Texture parentKey="check" alphaMode="ADD" file="Interface\Buttons\CheckButtonHilight" hidden="true">
							<Anchors>
								<Anchor point="CENTER" relativeTo="$parentIcon" relativePoint="CENTER" x="0" y="0"/>
							</Anchors>
						</Texture>
					</Layer>
				
					<Layer level="ARTWORK" textureSubLevel="1">
						<Texture name="$parentIcon" file="Interface\AddOns\ccBags\Textures\BlankQuickAction" parentKey="Icon">
							<TexCoords left="0" right="0.609375" top="0" bottom="0.609375"/>
							<Size x="37" y="37"/>
						</Texture>
					</Layer>
					
					<Layer level="ARTWORK" textureSubLevel="2">
						<Texture name="$parentBorder" file="Interface\Buttons\UI-Quickslot2" parentKey="Border">
							<Size x="50" y="50"/>
							<Anchors>
								<Anchor point="TOPLEFT" relativeTo="$parent" relativePoint="TOPLEFT" x="-10" y="10"/>
							</Anchors>	
						</Texture>
						<Texture name="$parentQuality" file="Interface\Common\WhiteIconFrame" parentKey="Quality">
							<Size x="29" y="29"/>
							<Anchors>
								<Anchor point="CENTER"/>
							</Anchors>	
						</Texture>
					</Layer>
					
					<Layer level="ARTWORK" textureSubLevel="3">
						<Texture name="$parentFlyoutArrow" file="Interface\Buttons\ActionBarFlyoutButton" parentKey="FlyoutArrow">
							<Size x="23" y="11"/>	
							<TexCoords left="0.62500000" right="0.98437500" top="0.74218750" bottom="0.82812500"/>
							<Anchors>
								<Anchor point="CENTER" relativeTo="$parent" relativePoint="BOTTOM" x="0" y="-3"/>
							</Anchors>	
							<Animations>
								<AnimationGroup parentKey="Click">
									<Translation offsetX="0" offsetY="-1" duration="0.05" order="1"/>
									<Scale scaleX="1.08" scaleY="0.92"  duration="0.12" order="1"/>
									<Translation offsetX="0" offsetY="3" duration="0.18" order="2"/>
									<Scale scaleX="0.82" scaleY="1.18"  duration="0.33" order="2"/>
									<Translation offsetX="0" offsetY="-2" duration="0.35" order="3"/>
									<Scale scaleX="1" scaleY="1"  duration="0.25" order="3"/>
								</AnimationGroup>
							</Animations>
						</Texture>
					</Layer>
				</Layers>
				<Anchors>
					<Anchor point="BOTTOM" relativeTo="$parent" relativePoint="TOP" x="0" y="5"/>
				</Anchors>
				<Animations>
					<AnimationGroup parentKey="Exit">
						<Alpha FromAlpha="1" ToAlpha="1" duration="1.4" order="1"/>
						<Alpha FromAlpha="1" ToAlpha="0" duration="0.4" order="2"/>
						<Scripts>
							<OnFinished>
							self:GetParent():Hide()
							</OnFinished>
						</Scripts>
					</AnimationGroup>
					<AnimationGroup parentKey="FastExit">
						<Alpha FromAlpha="1" ToAlpha="0" duration="0.25" order="2"/>
						<Scripts>
							<OnFinished>
							self:GetParent():Hide()
							</OnFinished>
						</Scripts>
					</AnimationGroup>
				</Animations>
				<Scripts>
					<OnHide>
						self:SetScript("OnUpdate",nil)
					</OnHide>
				</Scripts>
			</Frame>
		</Frames>
		<Layers>
			<Layer level="ARTWORK" textureSubLevel="1">
				<Texture name="$parentFlyoutBorder" file="Interface\Buttons\ActionBarFlyoutButton" parentKey="FlyoutBorder" hidden="true">
					<Size x="35" y="35"/>	
					<TexCoords left="0.01562500" right="0.67187500" top="0.39843750" bottom="0.72656250"/>	
					<Anchors>
						<Anchor point="CENTER" relativeTo="$parent" relativePoint="CENTER" x="0" y="-1"/>
					</Anchors>
				</Texture>
				<Texture name="$parentFlyoutBorderShadow" file="Interface\Buttons\ActionBarFlyoutButton" parentKey="FlyoutBorderShadow" hidden="true">
					<Size x="40" y="40"/>
					<TexCoords left="0.01562500" right="0.76562500" top="0.00781250" bottom="0.38281250"/>	
					<Anchors>
						<Anchor point="CENTER" relativeTo="$parent" relativePoint="CENTER" x="0" y="-1"/>
					</Anchors>
				</Texture>
			</Layer>

		  	<Layer level="OVERLAY">
				<Texture parentKey="check" alphaMode="ADD" file="Interface\Buttons\CheckButtonHilight" hidden="true">
					<Anchors>
						<Anchor point="CENTER" relativeTo="$parentIcon" relativePoint="CENTER" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Scripts>
			<OnShow>
				CCB_AssignTag(self)
				self:RegisterForClicks("LeftButtonUp", "RightButtonUp");
				CollectionsContainerSlotButton_UpdateIcon(self)
				_G[self:GetName().."NormalTexture"]:SetWidth(50);
				_G[self:GetName().."NormalTexture"]:SetHeight(50);
				_G[self:GetName().."Count"]:SetPoint("BOTTOMRIGHT", -2, 2);
				self.maxDisplayCount = 999;
				self:RegisterEvent("UPDATE_BINDINGS")
				CollectionsContainerSlotButton_UpdateBindings(self)
				CollectionsContainerSlotButton_UpdateHandler(self)											
			</OnShow>
			<OnEnter>
				GameTooltip:SetOwner(self, "ANCHOR_LEFT");
				local line = self.tag.." Container"
				if self.tag == "Set" then 
					line = "Coming Soon!"
				end
				GameTooltip:SetText(line, 1.0, 1.0, 1.0);
				
				local keyBinding = GetBindingKey(self.binding);
				if ( keyBinding ) then
					GameTooltip:AppendText(" "..NORMAL_FONT_COLOR_CODE.."("..keyBinding..")"..FONT_COLOR_CODE_CLOSE);
				end
				GameTooltip:Show();
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide();
				ResetCursor();
			</OnLeave>
			<OnEvent>
				CollectionsContainerSlotButton_UpdateBindings(self)
			</OnEvent>
		</Scripts>
	</Button>

	<Button name="MountContainerSlotButton" inherits="CollectionsContainerSlotButtonTemplate" parent="CharacterBag3Slot"/>
	<Button name="PetContainerSlotButton" inherits="CollectionsContainerSlotButtonTemplate" parent="CharacterBag2Slot"/>
	<Button name="ToyContainerSlotButton" inherits="CollectionsContainerSlotButtonTemplate" parent="CharacterBag1Slot"/>	
	<Button name="SetContainerSlotButton" inherits="CollectionsContainerSlotButtonTemplate" parent="CharacterBag0Slot"/>	
	<Button name="BagContainerSlotButton" inherits="CollectionsContainerSlotButtonTemplate" parent="MainMenuBarBackpackButton">
		<Scripts>
			<OnLoad>
				self.secure = false
				self.tag = "Bag"
				self.binding = "TOGGLEBACKPACK"
			</OnLoad>
			<OnShow>
				self:RegisterForClicks("LeftButtonUp", "RightButtonUp");
				_G[self:GetName().."IconTexture"]:SetTexture("Interface\\Buttons\\Button-Backpack-Up")
				_G[self:GetName().."NormalTexture"]:SetWidth(50);
				_G[self:GetName().."NormalTexture"]:SetHeight(50);
				_G[self:GetName().."Count"]:SetPoint("BOTTOMRIGHT", -2, 2);
				self.maxDisplayCount = 999;
				self:RegisterEvent("UPDATE_BINDINGS")
				CollectionsContainerSlotButton_UpdateBindings(self)
			</OnShow>
			<OnClick>
				BackpackSlotButton_OnClick(self,button)
				CollectionsContainerSlotCheckState(self)
			</OnClick>
			<OnEnter>
				GameTooltip:SetOwner(self, "ANCHOR_LEFT");
				local line = "Backpack"
				GameTooltip:SetText(line, 1.0, 1.0, 1.0);
				local keyBinding = GetBindingKey(self.binding);
				if ( keyBinding ) then
					GameTooltip:AppendText(" "..NORMAL_FONT_COLOR_CODE.."("..keyBinding..")"..FONT_COLOR_CODE_CLOSE);
				end
				GameTooltip:Show();
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide();
				ResetCursor();
			</OnLeave>
			<OnEvent>
				CollectionsContainerSlotButton_UpdateBindings(self)
				CollectionsContainerSlotCheckState(self)
			</OnEvent>
		</Scripts>
	</Button>

	
	<Frame name="ccBagContainerSlotKeybinder">
		<Scripts>
			<OnLoad>
				self:RegisterEvent("PLAYER_ENTERING_WORLD")
			</OnLoad>
			<OnEvent>
				CollectionsJournal_LoadUI();
				SetOverrideBindingClick(BagContainerSlotButton, true, GetBindingKey("TOGGLEBACKPACK"), "BagContainerSlotButton", "RightButton")
				self:UnregisterEvent("PLAYER_ENTERING_WORLD")
			</OnEvent>
		</Scripts>
	</Frame>

	
</Ui>
